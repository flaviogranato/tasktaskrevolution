{% extends "base.html" %} {% block title %}Tasks{% endblock title %} {% block
content %}
<section id="app" v-cloak>
    <h2>All Tasks (${ tasks.length }$)</h2>

    <div class="list-container">
        <ul>
            <li v-for="task in tasks" :key="task.id">
                <strong>${ task.name }$ (${ task.code }$)</strong>
                <span v-if="typeof task.status === 'object'">
                    (In Progress: ${ task.status.InProgress.progress }%)
                </span>
                <span v-else-if="task.status === 'Completed'">(Completed)</span>
                <span v-else-if="task.status === 'Planned'">(Planned)</span>
                <span v-else-if="task.status === 'Blocked'">(Blocked)</span>
                <span v-else-if="task.status === 'Cancelled'">(Cancelled)</span>
                - Due: ${ task.due_date }$
                <div
                    v-if="task.assigned_resources.length > 0"
                    class="assignees"
                >
                    Assignees: ${ task.assigned_resources.join(', ') }$
                </div>
            </li>
        </ul>
        <p v-if="tasks.length === 0">No tasks have been created yet.</p>
    </div>
</section>
{% endblock content %} {% block scripts %}
<script>
    const { createApp, ref } = Vue;

    createApp({
        setup() {
            // Use Tera to safely inject the tasks data as a JSON object
            const tasks = ref({{ tasks | json_encode() | safe }});

            return {
                tasks,
            };
        },
        delimiters: ['${', '}$'] // Change delimiters to avoid conflict with Tera
    }).mount('#app');
</script>
<style>
    [v-cloak] {
        display: none;
    }
    .assignees {
        font-size: 0.9em;
        color: #555;
        padding-left: 10px;
    }
</style>
{% endblock scripts %}
