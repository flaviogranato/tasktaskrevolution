<!doctype html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>
            Resources
        </title>
        <link rel="stylesheet" href="style.css" />
        <link
            rel="stylesheet"
            href="https://cdn.jsdelivr.net/npm/frappe-gantt/dist/frappe-gantt.css"
        />
    </head>
    <body>
        <header>
            <h1>
                <a href="index.html"
                    >microservico-java</a
                >
            </h1>
            <nav>
                <a href="index.html">Dashboard</a>
                <a href="tasks.html">Tasks</a>
                <a href="resources.html">Resources</a>
            </nav>
        </header>

        <main>
<section id="app" v-cloak>
    <h2>All Resources (${ filteredResources.length }$)</h2>

    <div class="list-container">
        <input
            type="text"
            v-model="searchQuery"
            placeholder="Filter resources by name..."
            class="resource-filter-input"
        />
        <ul>
            <li v-for="resource in filteredResources" :key="resource.id">
                <strong>${ resource.name }$</strong> - ${ resource.resource_type }$
                <div v-if="resource.email" class="email">
                    Email: ${ resource.email }$
                </div>
            </li>
        </ul>
        <p v-if="filteredResources.length === 0">No resources match your filter.</p>
    </div>
</section>
</main>

        <footer>
            <p>
                Generated by TaskTaskRevolution on 2025-07-29 14:20
            </p>
        </footer>

        <!-- Adicionar Vue.js -->
        <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/frappe-gantt/dist/frappe-gantt.min.js"></script>
        
<script>
    const { createApp, ref, computed } = Vue;

    createApp({
        setup() {
            const searchQuery = ref('');
            // Safely inject the resources data from Tera as a JSON object
            const resources = ref([{"email":null,"id":"","name":"Joao","project_assignments":null,"resource_type":"dev","time_off_balance":0,"time_off_history":[],"vacations":null}]);

            const filteredResources = computed(() => {
                if (!searchQuery.value) {
                    return resources.value;
                }
                const lowerCaseQuery = searchQuery.value.toLowerCase();
                return resources.value.filter(resource =>
                    resource.name.toLowerCase().includes(lowerCaseQuery)
                );
            });

            return {
                searchQuery,
                resources,
                filteredResources,
            };
        },
        delimiters: ['${', '}$'] // Avoid conflict with Tera
    }).mount('#app');
</script>
<style>
    [v-cloak] { display: none; }
    .resource-filter-input {
        width: 100%;
        padding: 8px 10px;
        margin-bottom: 20px;
        box-sizing: border-box;
        border: 1px solid #ddd;
        border-radius: 4px;
        font-size: 1rem;
    }
    .email {
        font-size: 0.9em;
        color: #777;
        padding-left: 10px;
    }
</style>

    </body>
</html>
